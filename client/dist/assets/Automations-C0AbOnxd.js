import{c as pe,r,j as e,an as Nt,a7 as D,a5 as bt,a6 as ke,ao as Tt,a8 as Me,ap as B,aq as Y,ar as Ue,as as It,at as Et,ab as A,au as Pt,b as We,ad as Rt,av as _t,aw as At,ax as Mt,ay as Dt,az as kt,aA as Ot,aB as Lt,aC as Vt,aD as Fe,f as fe,D as Bt,m as Ht,n as Ut,o as Wt,I as te,B as K,E as Ft,aE as zt,C as Kt,h as qt,i as $t,k as Gt,aF as Oe,q as Yt,aG as Zt,aH as Qt}from"./index-DESoNwQK.js";import{B as Le}from"./badge-BZPWyFCa.js";import{u as Xt,L as Ve,S as Jt}from"./label-BvjkKViM.js";import{P as Te}from"./plus-DdIgbnXm.js";import{T as Ie}from"./trash-2-LwTOdgcj.js";const Be=pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const eo=pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const to=pe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const oo=pe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);const no=pe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function He(o,[n,t]){return Math.min(t,Math.max(n,o))}function ro(o){const n=so(o),t=r.forwardRef((l,a)=>{const{children:d,...i}=l,c=r.Children.toArray(d),s=c.find(lo);if(s){const u=s.props.children,m=c.map(x=>x===s?r.Children.count(u)>1?r.Children.only(null):r.isValidElement(u)?u.props.children:null:x);return e.jsx(n,{...i,ref:a,children:r.isValidElement(u)?r.cloneElement(u,void 0,m):null})}return e.jsx(n,{...i,ref:a,children:d})});return t.displayName=`${o}.Slot`,t}function so(o){const n=r.forwardRef((t,l)=>{const{children:a,...d}=t;if(r.isValidElement(a)){const i=co(a),c=io(d,a.props);return a.type!==r.Fragment&&(c.ref=l?Nt(l,i):i),r.cloneElement(a,c)}return r.Children.count(a)>1?r.Children.only(null):null});return n.displayName=`${o}.SlotClone`,n}var ao=Symbol("radix.slottable");function lo(o){return r.isValidElement(o)&&typeof o.type=="function"&&"__radixId"in o.type&&o.type.__radixId===ao}function io(o,n){const t={...n};for(const l in n){const a=o[l],d=n[l];/^on[A-Z]/.test(l)?a&&d?t[l]=(...c)=>{const s=d(...c);return a(...c),s}:a&&(t[l]=a):l==="style"?t[l]={...a,...d}:l==="className"&&(t[l]=[a,d].filter(Boolean).join(" "))}return{...o,...t}}function co(o){let n=Object.getOwnPropertyDescriptor(o.props,"ref")?.get,t=n&&"isReactWarning"in n&&n.isReactWarning;return t?o.ref:(n=Object.getOwnPropertyDescriptor(o,"ref")?.get,t=n&&"isReactWarning"in n&&n.isReactWarning,t?o.props.ref:o.props.ref||o.ref)}var ze=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),uo="VisuallyHidden",po=r.forwardRef((o,n)=>e.jsx(D.span,{...o,ref:n,style:{...ze,...o.style}}));po.displayName=uo;var fo=[" ","Enter","ArrowUp","ArrowDown"],mo=[" ","Enter"],oe="Select",[ge,ve,ho]=It(oe),[le]=Rt(oe,[ho,Ue]),Se=Ue(),[xo,Z]=le(oe),[go,vo]=le(oe),Ke=o=>{const{__scopeSelect:n,children:t,open:l,defaultOpen:a,onOpenChange:d,value:i,defaultValue:c,onValueChange:s,dir:u,name:m,autoComplete:x,disabled:j,required:E,form:N}=o,p=Se(n),[w,C]=r.useState(null),[f,y]=r.useState(null),[g,S]=r.useState(!1),v=bt(u),[T,L]=ke({prop:l,defaultProp:a??!1,onChange:d,caller:oe}),[q,X]=ke({prop:i,defaultProp:c,onChange:s,caller:oe}),H=r.useRef(null),U=w?N||!!w.closest("form"):!0,[$,W]=r.useState(new Set),F=Array.from($).map(M=>M.props.value).join(";");return e.jsx(Tt,{...p,children:e.jsxs(xo,{required:E,scope:n,trigger:w,onTriggerChange:C,valueNode:f,onValueNodeChange:y,valueNodeHasChildren:g,onValueNodeHasChildrenChange:S,contentId:Me(),value:q,onValueChange:X,open:T,onOpenChange:L,dir:v,triggerPointerDownPosRef:H,disabled:j,children:[e.jsx(ge.Provider,{scope:n,children:e.jsx(go,{scope:o.__scopeSelect,onNativeOptionAdd:r.useCallback(M=>{W(V=>new Set(V).add(M))},[]),onNativeOptionRemove:r.useCallback(M=>{W(V=>{const z=new Set(V);return z.delete(M),z})},[]),children:t})}),U?e.jsxs(ht,{"aria-hidden":!0,required:E,tabIndex:-1,name:m,autoComplete:x,value:q,onChange:M=>X(M.target.value),disabled:j,form:N,children:[q===void 0?e.jsx("option",{value:""}):null,Array.from($)]},F):null]})})};Ke.displayName=oe;var qe="SelectTrigger",$e=r.forwardRef((o,n)=>{const{__scopeSelect:t,disabled:l=!1,...a}=o,d=Se(t),i=Z(qe,t),c=i.disabled||l,s=B(n,i.onTriggerChange),u=ve(t),m=r.useRef("touch"),[x,j,E]=gt(p=>{const w=u().filter(y=>!y.disabled),C=w.find(y=>y.value===i.value),f=vt(w,p,C);f!==void 0&&i.onValueChange(f.value)}),N=p=>{c||(i.onOpenChange(!0),E()),p&&(i.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return e.jsx(Et,{asChild:!0,...d,children:e.jsx(D.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":xt(i.value)?"":void 0,...a,ref:s,onClick:A(a.onClick,p=>{p.currentTarget.focus(),m.current!=="mouse"&&N(p)}),onPointerDown:A(a.onPointerDown,p=>{m.current=p.pointerType;const w=p.target;w.hasPointerCapture(p.pointerId)&&w.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(N(p),p.preventDefault())}),onKeyDown:A(a.onKeyDown,p=>{const w=x.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&j(p.key),!(w&&p.key===" ")&&fo.includes(p.key)&&(N(),p.preventDefault())})})})});$e.displayName=qe;var Ge="SelectValue",Ye=r.forwardRef((o,n)=>{const{__scopeSelect:t,className:l,style:a,children:d,placeholder:i="",...c}=o,s=Z(Ge,t),{onValueNodeHasChildrenChange:u}=s,m=d!==void 0,x=B(n,s.onValueNodeChange);return Y(()=>{u(m)},[u,m]),e.jsx(D.span,{...c,ref:x,style:{pointerEvents:"none"},children:xt(s.value)?e.jsx(e.Fragment,{children:i}):d})});Ye.displayName=Ge;var So="SelectIcon",Ze=r.forwardRef((o,n)=>{const{__scopeSelect:t,children:l,...a}=o;return e.jsx(D.span,{"aria-hidden":!0,...a,ref:n,children:l||"▼"})});Ze.displayName=So;var wo="SelectPortal",Qe=o=>e.jsx(Pt,{asChild:!0,...o});Qe.displayName=wo;var ne="SelectContent",Xe=r.forwardRef((o,n)=>{const t=Z(ne,o.__scopeSelect),[l,a]=r.useState();if(Y(()=>{a(new DocumentFragment)},[]),!t.open){const d=l;return d?We.createPortal(e.jsx(Je,{scope:o.__scopeSelect,children:e.jsx(ge.Slot,{scope:o.__scopeSelect,children:e.jsx("div",{children:o.children})})}),d):null}return e.jsx(et,{...o,ref:n})});Xe.displayName=ne;var O=10,[Je,Q]=le(ne),yo="SelectContentImpl",Co=ro("SelectContent.RemoveScroll"),et=r.forwardRef((o,n)=>{const{__scopeSelect:t,position:l="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:d,onPointerDownOutside:i,side:c,sideOffset:s,align:u,alignOffset:m,arrowPadding:x,collisionBoundary:j,collisionPadding:E,sticky:N,hideWhenDetached:p,avoidCollisions:w,...C}=o,f=Z(ne,t),[y,g]=r.useState(null),[S,v]=r.useState(null),T=B(n,h=>g(h)),[L,q]=r.useState(null),[X,H]=r.useState(null),U=ve(t),[$,W]=r.useState(!1),F=r.useRef(!1);r.useEffect(()=>{if(y)return At(y)},[y]),Mt();const M=r.useCallback(h=>{const[P,...k]=U().map(R=>R.ref.current),[b]=k.slice(-1),I=document.activeElement;for(const R of h)if(R===I||(R?.scrollIntoView({block:"nearest"}),R===P&&S&&(S.scrollTop=0),R===b&&S&&(S.scrollTop=S.scrollHeight),R?.focus(),document.activeElement!==I))return},[U,S]),V=r.useCallback(()=>M([L,y]),[M,L,y]);r.useEffect(()=>{$&&V()},[$,V]);const{onOpenChange:z,triggerPointerDownPosRef:G}=f;r.useEffect(()=>{if(y){let h={x:0,y:0};const P=b=>{h={x:Math.abs(Math.round(b.pageX)-(G.current?.x??0)),y:Math.abs(Math.round(b.pageY)-(G.current?.y??0))}},k=b=>{h.x<=10&&h.y<=10?b.preventDefault():y.contains(b.target)||z(!1),document.removeEventListener("pointermove",P),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",P),document.addEventListener("pointerup",k,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",k,{capture:!0})}}},[y,z,G]),r.useEffect(()=>{const h=()=>z(!1);return window.addEventListener("blur",h),window.addEventListener("resize",h),()=>{window.removeEventListener("blur",h),window.removeEventListener("resize",h)}},[z]);const[we,me]=gt(h=>{const P=U().filter(I=>!I.disabled),k=P.find(I=>I.ref.current===document.activeElement),b=vt(P,h,k);b&&setTimeout(()=>b.ref.current.focus())}),ye=r.useCallback((h,P,k)=>{const b=!F.current&&!k;(f.value!==void 0&&f.value===P||b)&&(q(h),b&&(F.current=!0))},[f.value]),Ce=r.useCallback(()=>y?.focus(),[y]),re=r.useCallback((h,P,k)=>{const b=!F.current&&!k;(f.value!==void 0&&f.value===P||b)&&H(h)},[f.value]),he=l==="popper"?Ee:tt,ie=he===Ee?{side:c,sideOffset:s,align:u,alignOffset:m,arrowPadding:x,collisionBoundary:j,collisionPadding:E,sticky:N,hideWhenDetached:p,avoidCollisions:w}:{};return e.jsx(Je,{scope:t,content:y,viewport:S,onViewportChange:v,itemRefCallback:ye,selectedItem:L,onItemLeave:Ce,itemTextRefCallback:re,focusSelectedItem:V,selectedItemText:X,position:l,isPositioned:$,searchRef:we,children:e.jsx(Dt,{as:Co,allowPinchZoom:!0,children:e.jsx(kt,{asChild:!0,trapped:f.open,onMountAutoFocus:h=>{h.preventDefault()},onUnmountAutoFocus:A(a,h=>{f.trigger?.focus({preventScroll:!0}),h.preventDefault()}),children:e.jsx(Ot,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:d,onPointerDownOutside:i,onFocusOutside:h=>h.preventDefault(),onDismiss:()=>f.onOpenChange(!1),children:e.jsx(he,{role:"listbox",id:f.contentId,"data-state":f.open?"open":"closed",dir:f.dir,onContextMenu:h=>h.preventDefault(),...C,...ie,onPlaced:()=>W(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:A(C.onKeyDown,h=>{const P=h.ctrlKey||h.altKey||h.metaKey;if(h.key==="Tab"&&h.preventDefault(),!P&&h.key.length===1&&me(h.key),["ArrowUp","ArrowDown","Home","End"].includes(h.key)){let b=U().filter(I=>!I.disabled).map(I=>I.ref.current);if(["ArrowUp","End"].includes(h.key)&&(b=b.slice().reverse()),["ArrowUp","ArrowDown"].includes(h.key)){const I=h.target,R=b.indexOf(I);b=b.slice(R+1)}setTimeout(()=>M(b)),h.preventDefault()}})})})})})})});et.displayName=yo;var jo="SelectItemAlignedPosition",tt=r.forwardRef((o,n)=>{const{__scopeSelect:t,onPlaced:l,...a}=o,d=Z(ne,t),i=Q(ne,t),[c,s]=r.useState(null),[u,m]=r.useState(null),x=B(n,T=>m(T)),j=ve(t),E=r.useRef(!1),N=r.useRef(!0),{viewport:p,selectedItem:w,selectedItemText:C,focusSelectedItem:f}=i,y=r.useCallback(()=>{if(d.trigger&&d.valueNode&&c&&u&&p&&w&&C){const T=d.trigger.getBoundingClientRect(),L=u.getBoundingClientRect(),q=d.valueNode.getBoundingClientRect(),X=C.getBoundingClientRect();if(d.dir!=="rtl"){const I=X.left-L.left,R=q.left-I,J=T.left-R,ee=T.width+J,je=Math.max(ee,L.width),Ne=window.innerWidth-O,be=He(R,[O,Math.max(O,Ne-je)]);c.style.minWidth=ee+"px",c.style.left=be+"px"}else{const I=L.right-X.right,R=window.innerWidth-q.right-I,J=window.innerWidth-T.right-R,ee=T.width+J,je=Math.max(ee,L.width),Ne=window.innerWidth-O,be=He(R,[O,Math.max(O,Ne-je)]);c.style.minWidth=ee+"px",c.style.right=be+"px"}const H=j(),U=window.innerHeight-O*2,$=p.scrollHeight,W=window.getComputedStyle(u),F=parseInt(W.borderTopWidth,10),M=parseInt(W.paddingTop,10),V=parseInt(W.borderBottomWidth,10),z=parseInt(W.paddingBottom,10),G=F+M+$+z+V,we=Math.min(w.offsetHeight*5,G),me=window.getComputedStyle(p),ye=parseInt(me.paddingTop,10),Ce=parseInt(me.paddingBottom,10),re=T.top+T.height/2-O,he=U-re,ie=w.offsetHeight/2,h=w.offsetTop+ie,P=F+M+h,k=G-P;if(P<=re){const I=H.length>0&&w===H[H.length-1].ref.current;c.style.bottom="0px";const R=u.clientHeight-p.offsetTop-p.offsetHeight,J=Math.max(he,ie+(I?Ce:0)+R+V),ee=P+J;c.style.height=ee+"px"}else{const I=H.length>0&&w===H[0].ref.current;c.style.top="0px";const J=Math.max(re,F+p.offsetTop+(I?ye:0)+ie)+k;c.style.height=J+"px",p.scrollTop=P-re+p.offsetTop}c.style.margin=`${O}px 0`,c.style.minHeight=we+"px",c.style.maxHeight=U+"px",l?.(),requestAnimationFrame(()=>E.current=!0)}},[j,d.trigger,d.valueNode,c,u,p,w,C,d.dir,l]);Y(()=>y(),[y]);const[g,S]=r.useState();Y(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const v=r.useCallback(T=>{T&&N.current===!0&&(y(),f?.(),N.current=!1)},[y,f]);return e.jsx(bo,{scope:t,contentWrapper:c,shouldExpandOnScrollRef:E,onScrollButtonChange:v,children:e.jsx("div",{ref:s,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:g},children:e.jsx(D.div,{...a,ref:x,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});tt.displayName=jo;var No="SelectPopperPosition",Ee=r.forwardRef((o,n)=>{const{__scopeSelect:t,align:l="start",collisionPadding:a=O,...d}=o,i=Se(t);return e.jsx(Lt,{...i,...d,ref:n,align:l,collisionPadding:a,style:{boxSizing:"border-box",...d.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ee.displayName=No;var[bo,De]=le(ne,{}),Pe="SelectViewport",ot=r.forwardRef((o,n)=>{const{__scopeSelect:t,nonce:l,...a}=o,d=Q(Pe,t),i=De(Pe,t),c=B(n,d.onViewportChange),s=r.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),e.jsx(ge.Slot,{scope:t,children:e.jsx(D.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:A(a.onScroll,u=>{const m=u.currentTarget,{contentWrapper:x,shouldExpandOnScrollRef:j}=i;if(j?.current&&x){const E=Math.abs(s.current-m.scrollTop);if(E>0){const N=window.innerHeight-O*2,p=parseFloat(x.style.minHeight),w=parseFloat(x.style.height),C=Math.max(p,w);if(C<N){const f=C+E,y=Math.min(N,f),g=f-y;x.style.height=y+"px",x.style.bottom==="0px"&&(m.scrollTop=g>0?g:0,x.style.justifyContent="flex-end")}}}s.current=m.scrollTop})})})]})});ot.displayName=Pe;var nt="SelectGroup",[To,Io]=le(nt),Eo=r.forwardRef((o,n)=>{const{__scopeSelect:t,...l}=o,a=Me();return e.jsx(To,{scope:t,id:a,children:e.jsx(D.div,{role:"group","aria-labelledby":a,...l,ref:n})})});Eo.displayName=nt;var rt="SelectLabel",st=r.forwardRef((o,n)=>{const{__scopeSelect:t,...l}=o,a=Io(rt,t);return e.jsx(D.div,{id:a.id,...l,ref:n})});st.displayName=rt;var xe="SelectItem",[Po,at]=le(xe),lt=r.forwardRef((o,n)=>{const{__scopeSelect:t,value:l,disabled:a=!1,textValue:d,...i}=o,c=Z(xe,t),s=Q(xe,t),u=c.value===l,[m,x]=r.useState(d??""),[j,E]=r.useState(!1),N=B(n,f=>s.itemRefCallback?.(f,l,a)),p=Me(),w=r.useRef("touch"),C=()=>{a||(c.onValueChange(l),c.onOpenChange(!1))};if(l==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Po,{scope:t,value:l,disabled:a,textId:p,isSelected:u,onItemTextChange:r.useCallback(f=>{x(y=>y||(f?.textContent??"").trim())},[]),children:e.jsx(ge.ItemSlot,{scope:t,value:l,disabled:a,textValue:m,children:e.jsx(D.div,{role:"option","aria-labelledby":p,"data-highlighted":j?"":void 0,"aria-selected":u&&j,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...i,ref:N,onFocus:A(i.onFocus,()=>E(!0)),onBlur:A(i.onBlur,()=>E(!1)),onClick:A(i.onClick,()=>{w.current!=="mouse"&&C()}),onPointerUp:A(i.onPointerUp,()=>{w.current==="mouse"&&C()}),onPointerDown:A(i.onPointerDown,f=>{w.current=f.pointerType}),onPointerMove:A(i.onPointerMove,f=>{w.current=f.pointerType,a?s.onItemLeave?.():w.current==="mouse"&&f.currentTarget.focus({preventScroll:!0})}),onPointerLeave:A(i.onPointerLeave,f=>{f.currentTarget===document.activeElement&&s.onItemLeave?.()}),onKeyDown:A(i.onKeyDown,f=>{s.searchRef?.current!==""&&f.key===" "||(mo.includes(f.key)&&C(),f.key===" "&&f.preventDefault())})})})})});lt.displayName=xe;var ue="SelectItemText",it=r.forwardRef((o,n)=>{const{__scopeSelect:t,className:l,style:a,...d}=o,i=Z(ue,t),c=Q(ue,t),s=at(ue,t),u=vo(ue,t),[m,x]=r.useState(null),j=B(n,C=>x(C),s.onItemTextChange,C=>c.itemTextRefCallback?.(C,s.value,s.disabled)),E=m?.textContent,N=r.useMemo(()=>e.jsx("option",{value:s.value,disabled:s.disabled,children:E},s.value),[s.disabled,s.value,E]),{onNativeOptionAdd:p,onNativeOptionRemove:w}=u;return Y(()=>(p(N),()=>w(N)),[p,w,N]),e.jsxs(e.Fragment,{children:[e.jsx(D.span,{id:s.textId,...d,ref:j}),s.isSelected&&i.valueNode&&!i.valueNodeHasChildren?We.createPortal(d.children,i.valueNode):null]})});it.displayName=ue;var ct="SelectItemIndicator",dt=r.forwardRef((o,n)=>{const{__scopeSelect:t,...l}=o;return at(ct,t).isSelected?e.jsx(D.span,{"aria-hidden":!0,...l,ref:n}):null});dt.displayName=ct;var Re="SelectScrollUpButton",ut=r.forwardRef((o,n)=>{const t=Q(Re,o.__scopeSelect),l=De(Re,o.__scopeSelect),[a,d]=r.useState(!1),i=B(n,l.onScrollButtonChange);return Y(()=>{if(t.viewport&&t.isPositioned){let c=function(){const u=s.scrollTop>0;d(u)};const s=t.viewport;return c(),s.addEventListener("scroll",c),()=>s.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),a?e.jsx(ft,{...o,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:s}=t;c&&s&&(c.scrollTop=c.scrollTop-s.offsetHeight)}}):null});ut.displayName=Re;var _e="SelectScrollDownButton",pt=r.forwardRef((o,n)=>{const t=Q(_e,o.__scopeSelect),l=De(_e,o.__scopeSelect),[a,d]=r.useState(!1),i=B(n,l.onScrollButtonChange);return Y(()=>{if(t.viewport&&t.isPositioned){let c=function(){const u=s.scrollHeight-s.clientHeight,m=Math.ceil(s.scrollTop)<u;d(m)};const s=t.viewport;return c(),s.addEventListener("scroll",c),()=>s.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),a?e.jsx(ft,{...o,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:s}=t;c&&s&&(c.scrollTop=c.scrollTop+s.offsetHeight)}}):null});pt.displayName=_e;var ft=r.forwardRef((o,n)=>{const{__scopeSelect:t,onAutoScroll:l,...a}=o,d=Q("SelectScrollButton",t),i=r.useRef(null),c=ve(t),s=r.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return r.useEffect(()=>()=>s(),[s]),Y(()=>{c().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),e.jsx(D.div,{"aria-hidden":!0,...a,ref:n,style:{flexShrink:0,...a.style},onPointerDown:A(a.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(l,50))}),onPointerMove:A(a.onPointerMove,()=>{d.onItemLeave?.(),i.current===null&&(i.current=window.setInterval(l,50))}),onPointerLeave:A(a.onPointerLeave,()=>{s()})})}),Ro="SelectSeparator",mt=r.forwardRef((o,n)=>{const{__scopeSelect:t,...l}=o;return e.jsx(D.div,{"aria-hidden":!0,...l,ref:n})});mt.displayName=Ro;var Ae="SelectArrow",_o=r.forwardRef((o,n)=>{const{__scopeSelect:t,...l}=o,a=Se(t),d=Z(Ae,t),i=Q(Ae,t);return d.open&&i.position==="popper"?e.jsx(Vt,{...a,...l,ref:n}):null});_o.displayName=Ae;var Ao="SelectBubbleInput",ht=r.forwardRef(({__scopeSelect:o,value:n,...t},l)=>{const a=r.useRef(null),d=B(l,a),i=Xt(n);return r.useEffect(()=>{const c=a.current;if(!c)return;const s=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(s,"value").set;if(i!==n&&m){const x=new Event("change",{bubbles:!0});m.call(c,n),c.dispatchEvent(x)}},[i,n]),e.jsx(D.select,{...t,style:{...ze,...t.style},ref:d,defaultValue:n})});ht.displayName=Ao;function xt(o){return o===""||o===void 0}function gt(o){const n=_t(o),t=r.useRef(""),l=r.useRef(0),a=r.useCallback(i=>{const c=t.current+i;n(c),(function s(u){t.current=u,window.clearTimeout(l.current),u!==""&&(l.current=window.setTimeout(()=>s(""),1e3))})(c)},[n]),d=r.useCallback(()=>{t.current="",window.clearTimeout(l.current)},[]);return r.useEffect(()=>()=>window.clearTimeout(l.current),[]),[t,a,d]}function vt(o,n,t){const a=n.length>1&&Array.from(n).every(u=>u===n[0])?n[0]:n,d=t?o.indexOf(t):-1;let i=Mo(o,Math.max(d,0));a.length===1&&(i=i.filter(u=>u!==t));const s=i.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return s!==t?s:void 0}function Mo(o,n){return o.map((t,l)=>o[(n+l)%o.length])}var Do=Ke,St=$e,ko=Ye,Oo=Ze,Lo=Qe,wt=Xe,Vo=ot,yt=st,Ct=lt,Bo=it,Ho=dt,Uo=ut,Wo=pt,jt=mt;const ce=Do,de=ko,se=r.forwardRef(({className:o,children:n,...t},l)=>e.jsxs(St,{ref:l,className:fe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o),...t,children:[n,e.jsx(Oo,{asChild:!0,children:e.jsx(Fe,{className:"h-4 w-4 opacity-50"})})]}));se.displayName=St.displayName;const ae=r.forwardRef(({className:o,children:n,position:t="popper",...l},a)=>e.jsx(Lo,{children:e.jsxs(wt,{ref:a,className:fe("relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-border bg-popover text-popover-foreground shadow-md animate-in fade-in-80",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=top]:-translate-y-1",o),position:t,...l,children:[e.jsx(Uo,{className:"flex cursor-default items-center justify-center py-1",children:e.jsx(to,{className:"h-4 w-4"})}),e.jsx(Vo,{className:"p-1",children:n}),e.jsx(Wo,{className:"flex cursor-default items-center justify-center py-1",children:e.jsx(Fe,{className:"h-4 w-4"})})]})}));ae.displayName=wt.displayName;const Fo=r.forwardRef(({className:o,...n},t)=>e.jsx(yt,{ref:t,className:fe("px-2 py-1.5 text-sm font-semibold",o),...n}));Fo.displayName=yt.displayName;const _=r.forwardRef(({className:o,children:n,...t},l)=>e.jsxs(Ct,{ref:l,className:fe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o),...t,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ho,{children:e.jsx(eo,{className:"h-4 w-4"})})}),e.jsx(Bo,{children:n})]}));_.displayName=Ct.displayName;const zo=r.forwardRef(({className:o,...n},t)=>e.jsx(jt,{ref:t,className:fe("-mx-1 my-1 h-px bg-muted",o),...n}));zo.displayName=jt.displayName;function Ko({rule:o,open:n,onClose:t,onSave:l}){const[a,d]=r.useState(""),[i,c]=r.useState("TicketCreated"),[s,u]=r.useState([]),[m,x]=r.useState([]);r.useEffect(()=>{o?(d(o.title),c(o.trigger),u(o.conditions||[]),x(o.actions||[])):(d(""),c("TicketCreated"),u([{field:"priority",operator:"equals",value:""}]),x([]))},[o,n]);const j=()=>u([...s,{field:"status",operator:"equals",value:""}]),E=g=>u(s.filter((S,v)=>v!==g)),N=(g,S,v)=>{const T=[...s];T[g]={...T[g],[S]:v},u(T)},p=()=>x([...m,{type:"SendEmail",params:{}}]),w=g=>x(m.filter((S,v)=>v!==g)),C=(g,S)=>{const v=[...m];v[g]={type:S,params:{}},x(v)},f=(g,S,v)=>{const T=[...m];T[g].params={...T[g].params,[S]:v},x(T)},y=()=>{l({title:a,trigger:i,conditions:s,actions:m,isActive:!0})};return e.jsx(Bt,{open:n,onOpenChange:t,children:e.jsxs(Ht,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ut,{children:e.jsx(Wt,{children:o?"Editar Regra":"Nova Automação"})}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"grid gap-4 rounded-lg border bg-slate-50 p-4 dark:bg-slate-900/50",children:[e.jsx("h3",{className:"flex items-center gap-2 text-sm font-semibold uppercase text-muted-foreground",children:"1. Gatilho (Quando...)"}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Nome da Regra"}),e.jsx(te,{value:a,onChange:g=>d(g.target.value),placeholder:"Ex: Alerta de Prioridade Alta"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ve,{children:"Evento Disparador"}),e.jsxs(ce,{value:i,onValueChange:c,children:[e.jsx(se,{children:e.jsx(de,{})}),e.jsxs(ae,{children:[e.jsx(_,{value:"TicketCreated",children:"Quando um Chamado é Criado"}),e.jsx(_,{value:"TicketUpdated",children:"Quando um Chamado é Atualizado"})]})]})]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Be,{className:"rotate-90 text-muted-foreground"})}),e.jsxs("div",{className:"grid gap-4 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase text-muted-foreground",children:"2. Condições (Se...)"}),e.jsxs(K,{size:"sm",variant:"outline",onClick:j,children:[e.jsx(Te,{className:"mr-1 h-3 w-3"})," E também"]})]}),s.map((g,S)=>e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(ce,{value:g.field,onValueChange:v=>N(S,"field",v),children:[e.jsx(se,{className:"w-[180px]",children:e.jsx(de,{placeholder:"Campo"})}),e.jsxs(ae,{children:[e.jsx(_,{value:"priority",children:"Prioridade"}),e.jsx(_,{value:"status",children:"Status"}),e.jsx(_,{value:"category",children:"Categoria"}),e.jsx(_,{value:"subject",children:"Assunto"})]})]}),e.jsxs(ce,{value:g.operator,onValueChange:v=>N(S,"operator",v),children:[e.jsx(se,{className:"w-[140px]",children:e.jsx(de,{})}),e.jsxs(ae,{children:[e.jsx(_,{value:"equals",children:"Igual a"}),e.jsx(_,{value:"not_equals",children:"Diferente de"}),e.jsx(_,{value:"contains",children:"Contém"}),e.jsx(_,{value:"greater_than",children:"Maior que"})]})]}),e.jsx(te,{className:"flex-1",value:g.value,onChange:v=>N(S,"value",v.target.value),placeholder:"Valor (ex: Urgente, Hardware...)"}),e.jsx(K,{size:"icon",variant:"ghost",onClick:()=>E(S),children:e.jsx(Ie,{className:"h-4 w-4 text-muted-foreground hover:text-destructive"})})]},S)),s.length===0?e.jsx("p",{className:"text-sm italic text-muted-foreground",children:"Sempre executar (sem filtros)."}):null]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Be,{className:"rotate-90 text-muted-foreground"})}),e.jsxs("div",{className:"grid gap-4 rounded-lg border bg-slate-50 p-4 dark:bg-slate-900/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase text-muted-foreground",children:"3. Ações (Então faça...)"}),e.jsxs(K,{size:"sm",variant:"outline",onClick:p,children:[e.jsx(Te,{className:"mr-1 h-3 w-3"})," Adicionar Ação"]})]}),m.map((g,S)=>e.jsxs("div",{className:"space-y-3 rounded border bg-background p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ce,{value:g.type,onValueChange:v=>C(S,v),children:[e.jsx(se,{className:"w-[200px] font-medium",children:e.jsx(de,{})}),e.jsxs(ae,{children:[e.jsx(_,{value:"SendEmail",children:"Enviar E-mail"}),e.jsx(_,{value:"UpdateTicket",children:"Atualizar Chamado"}),e.jsx(_,{value:"AssignAgent",children:"Atribuir Técnico"})]})]}),e.jsx(K,{size:"icon",variant:"ghost",onClick:()=>w(S),children:e.jsx(Ie,{className:"h-4 w-4 text-destructive"})})]}),g.type==="SendEmail"?e.jsxs("div",{className:"grid gap-2 border-l-2 border-blue-200 pl-2",children:[e.jsx(te,{placeholder:"Para (ex: gerente@ti.com)",value:g.params.to||"",onChange:v=>f(S,"to",v.target.value)}),e.jsx(te,{placeholder:"Assunto",value:g.params.subject||"",onChange:v=>f(S,"subject",v.target.value)}),e.jsx(te,{placeholder:"Mensagem (pode usar {{ticket_code}})",value:g.params.body||"",onChange:v=>f(S,"body",v.target.value)})]}):null,g.type==="UpdateTicket"?e.jsxs("div",{className:"grid gap-2 border-l-2 border-amber-200 pl-2 lg:grid-cols-2",children:[e.jsxs(ce,{value:g.params.field||"",onValueChange:v=>f(S,"field",v),children:[e.jsx(se,{children:e.jsx(de,{placeholder:"Campo a mudar"})}),e.jsxs(ae,{children:[e.jsx(_,{value:"priority",children:"Definir Prioridade"}),e.jsx(_,{value:"status",children:"Definir Status"}),e.jsx(_,{value:"category",children:"Definir Categoria"})]})]}),e.jsx(te,{placeholder:"Novo Valor (ex: P1)",value:g.params.value||"",onChange:v=>f(S,"value",v.target.value)})]}):null,g.type==="AssignAgent"?e.jsx("div",{className:"border-l-2 border-purple-200 pl-2",children:e.jsx(te,{placeholder:"E-mail do Técnico",value:g.params.agentEmail||"",onChange:v=>f(S,"agentEmail",v.target.value)})}):null]},S)),m.length===0?e.jsx("p",{className:"text-sm italic text-destructive",children:"Adicione pelo menos uma ação."}):null]})]}),e.jsxs(Ft,{children:[e.jsx(K,{variant:"outline",onClick:t,children:"Cancelar"}),e.jsx(K,{onClick:y,disabled:!a||m.length===0,children:"Salvar Regra"})]})]})})}function qo(o){return o.map(n=>{if(n.type!=="UpdateTicket")return n;const t=n.params?.field,l=n.params?.value;return t?{...n,params:{[t]:l}}:n})}function Xo({token:o}){const[n,t]=r.useState([]),[l,a]=r.useState(!1),[d,i]=r.useState(null);r.useEffect(()=>{o&&zt(o).then(s=>t(s)).catch(()=>t([]))},[o]);const c=async s=>{o&&window.confirm("Tem certeza que deseja excluir esta regra?")&&(await Qt(o,s),t(u=>u.filter(m=>m._id!==s)))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Automação e Regras"}),e.jsx("p",{className:"text-muted-foreground",children:"Defina gatilhos e ações automáticas para o sistema."})]}),e.jsxs(K,{onClick:()=>{i(null),a(!0)},children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),"Nova Regra"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.map(s=>e.jsxs(Kt,{className:`border-l-4 ${s.isActive?"border-l-emerald-500":"border-l-muted"}`,children:[e.jsxs(qt,{className:"flex flex-row items-start justify-between space-y-0 pb-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs($t,{className:"flex items-center gap-2 text-base font-semibold",children:[s.trigger==="TicketCreated"?e.jsx(no,{className:"h-4 w-4 text-amber-500"}):e.jsx(oo,{className:"h-4 w-4 text-blue-500"}),s.title]}),e.jsx(Gt,{className:"text-xs",children:s.trigger==="TicketCreated"?"Ao criar ticket":"Ao atualizar ticket"})]}),e.jsx(Jt,{checked:s.isActive,onCheckedChange:async u=>{if(!o)return;const m=await Oe(o,s._id,{isActive:u});t(x=>x.map(j=>j._id===s._id?m:j))}})]}),e.jsxs(Yt,{children:[e.jsx("div",{className:"mt-2 space-y-2 text-xs text-muted-foreground",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Le,{variant:"outline",children:[s.conditions.length," Condições"]}),e.jsx("span",{className:"text-muted-foreground",children:"→"}),e.jsxs(Le,{variant:"secondary",children:[s.actions.length," Ações"]})]})}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{i(s),a(!0)},children:"Editar"}),e.jsx(K,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive",onClick:()=>c(s._id),children:e.jsx(Ie,{className:"h-4 w-4"})})]})]})]},s._id))}),l&&e.jsx(Ko,{rule:d,open:l,onClose:()=>a(!1),onSave:async s=>{if(!o)return;const u={...s,actions:qo(s.actions)};if(d?._id){const m=await Oe(o,d._id,u);t(x=>x.map(j=>j._id===d._id?m:j))}else{const m=await Zt(o,u);t(x=>[m,...x])}a(!1)}})]})}export{Xo as Automations};
